!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("react-native")):"function"==typeof define&&define.amd?define(["exports","react","react-native"],n):n(t.ReactSpringNative={},t.React,t["react-native"])}(this,function(t,g,n){"use strict";function x(){return(x=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}function y(t,n){if(null==t)return{};var e,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e=o[i],0<=n.indexOf(e)||(r[e]=t[e]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)e=a[i],0<=n.indexOf(e)||Object.prototype.propertyIsEnumerable.call(t,e)&&(r[e]=t[e])}return r}function s(t,n){t.prototype.__proto__=n&&n.prototype,t.__proto__=n}g=g&&g.hasOwnProperty("default")?g.default:g;var m=function(){function t(){}var n=t.prototype;return n.__attach=function(){},n.__detach=function(){},n.__getValue=function(){},n.__getAnimatedValue=function(){return this.__getValue()},n.__addChild=function(t){},n.__removeChild=function(t){},n.__getChildren=function(){return[]},t}(),v=function(a){function t(t,n,e,i,r){var o;return(o=a.call(this)||this)._value=t,o._parent=n,o._animationClass=e,o._animationConfig=i,o._callback=r,o.__attach(),o._hey=1,o}var n=t.prototype;return n.__getValue=function(){return this._parent.__getValue()},n.__attach=function(){this._parent.__addChild(this)},n.__detach=function(){this._parent.__removeChild(this)},n.update=function(){this._value.animate(new this._animationClass(x({},this._animationConfig,{to:this._animationConfig.to.__getValue()})),this._callback)},s(t,a),t}(m),e=function(n){function t(){var t;return(t=n.call(this)||this)._children=[],t}var e=t.prototype;return e.__addChild=function(t){t instanceof v&&(this._tracked=!0),0===this._children.length&&this.__attach(),this._children.push(t)},e.__removeChild=function(t){var n=this._children.indexOf(t);-1!==n?(this._children.splice(n,1),0===this._children.length&&this.__detach()):console.warn("Trying to remove a child that doesn't exist")},e.__getChildren=function(){return this._children},s(t,n),t}(m),r=function(e){function t(t){var n;return t=t||{},(n=e.call(this)||this)._style=t,n}var n=t.prototype;return n.__getValue=function(){var t={};for(var n in this._style){var e=this._style[n];t[n]=e instanceof m?e.__getValue():e}return t},n.__getAnimatedValue=function(){var t={};for(var n in this._style){var e=this._style[n];e instanceof m&&(t[n]=e.__getAnimatedValue())}return t},n.__attach=function(){for(var t in this._style){var n=this._style[t];n instanceof m&&n.__addChild(this)}},n.__detach=function(){for(var t in this._style){var n=this._style[t];n instanceof m&&n.__removeChild(this)}},s(t,e),t}(e),a=function(i){function t(t,n){var e;return e=i.call(this)||this,t.style&&(t=x({},t,{style:new r(t.style)})),e._props=t,e._callback=n,e.__attach(),e}var n=t.prototype;return n.__getValue=function(){var t={};for(var n in this._props){var e=this._props[n];t[n]=e instanceof m?e.__getValue():e}return t},n.__getAnimatedValue=function(){var t={};for(var n in this._props){var e=this._props[n];e instanceof m&&(t[n]=e.__getAnimatedValue())}return t},n.__attach=function(){for(var t in this._props){var n=this._props[t];n instanceof m&&n.__addChild(this)}},n.__detach=function(){for(var t in this._props){var n=this._props[t];n instanceof m&&n.__removeChild(this)}},n.update=function(){this._callback()},s(t,i),t}(m),o=function(){function t(){}return t.create=function(t){return function(){return t.apply(void 0,arguments)}},t}(),u=void 0;function i(r){return function(t){function n(){return t.apply(this,arguments)||this}var e=n.prototype;return e.componentWillUnmount=function(){this._propsAnimated&&this._propsAnimated.__detach()},e.setNativeProps=function(t){!1===u.fn(this.node,t,this)&&this.forceUpdate()},e.componentWillMount=function(){this.attachProps(this.props)},e.attachProps=function(t){var n=this,e=this._propsAnimated;this._propsAnimated=new a(t,function(){n.node&&!1===u.fn(n.node,n._propsAnimated.__getAnimatedValue(),n)&&n.forceUpdate()}),e&&e.__detach()},e.componentWillReceiveProps=function(t){this.attachProps(t)},e.render=function(){var n=this,t=this._propsAnimated.__getValue(),e=t.style,i=y(t,["style"]);return g.createElement(r,x({},i,{style:u.transform(e),ref:function(t){return n.node=t}}))},s(n,t),n}(g.Component)}function c(t,n,e){return e<0&&(e+=1),1<e&&(e-=1),e<1/6?t+6*(n-t)*e:e<.5?n:e<2/3?t+(n-t)*(2/3-e)*6:t}function l(t,n,e){var i=e<.5?e*(1+n):e+n-e*n,r=2*e-i,o=c(r,i,t+1/3),a=c(r,i,t),s=c(r,i,t-1/3);return Math.round(255*o)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}var f="[-+]?\\d*\\.?\\d+",h=f+"%";function p(){return"\\(\\s*("+(t=arguments,Array.prototype.slice.call(t,0)).join(")\\s*,\\s*(")+")\\s*\\)";var t}var d={rgb:new RegExp("rgb"+p(f,f,f)),rgba:new RegExp("rgba"+p(f,f,f,f)),hsl:new RegExp("hsl"+p(f,h,h)),hsla:new RegExp("hsla"+p(f,h,h,f)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/};function _(t){var n=parseInt(t,10);return n<0?0:255<n?255:n}function b(t){return(parseFloat(t)%360+360)%360/360}function k(t){var n=parseFloat(t);return n<0?0:1<n?255:Math.round(255*n)}function w(t){var n=parseFloat(t,10);return n<0?0:100<n?1:n/100}var E={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},A=function(t){return t},V=function(){function t(){}return t.create=function(t){if("function"==typeof t)return function(){return t.apply(void 0,arguments)};if(t.output&&"string"==typeof t.output[0])return function(e){var i=e.output,r=(i=i.map(function(t){return t.replace(T,P)}).map(function(t){return t.replace(F,P)}))[0].match(C).map(function(){return[]});i.forEach(function(t){t.match(C).forEach(function(t,n){return r[n].push(+t)})});var o=i[0].match(C).map(function(t,n){return V.create(x({},e,{output:r[n]}))});return function(t){var n=0;return i[0].replace(C,function(){return o[n++](t)}).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,function(t,n,e,i,r){return"rgba("+Math.round(n)+", "+Math.round(e)+", "+Math.round(i)+", "+r+")"})}}(t);var e=t.output,i=t.range,r=t.easing||A,o="extend",a=t.map;void 0!==t.extrapolateLeft?o=t.extrapolateLeft:void 0!==t.extrapolate&&(o=t.extrapolate);var s="extend";return void 0!==t.extrapolateRight?s=t.extrapolateRight:void 0!==t.extrapolate&&(s=t.extrapolate),function(t){var n=function(t,n){for(var e=1;e<n.length-1&&!(n[e]>=t);++e);return e-1}(t,i);return function(t,n,e,i,r,o,a,s,u){var c=u?u(t):t;if(c<n){if("identity"===a)return c;"clamp"===a&&(c=n)}if(e<c){if("identity"===s)return c;"clamp"===s&&(c=e)}if(i===r)return i;if(n===e)return t<=n?i:r;n===-1/0?c=-c:e===1/0?c-=n:c=(c-n)/(e-n);c=o(c),i===-1/0?c=-c:r===1/0?c+=i:c=c*(r-i)+i;return c}(t,i[n],i[n+1],e[n],e[n+1],r,o,s,a)}},t}();function P(t){var n,e,i="number"==typeof(n=t)?n>>>0===n&&0<=n&&n<=4294967295?n:null:(e=d.hex6.exec(n))?parseInt(e[1]+"ff",16)>>>0:E.hasOwnProperty(n)?E[n]:(e=d.rgb.exec(n))?(_(e[1])<<24|_(e[2])<<16|_(e[3])<<8|255)>>>0:(e=d.rgba.exec(n))?(_(e[1])<<24|_(e[2])<<16|_(e[3])<<8|k(e[4]))>>>0:(e=d.hex3.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=d.hex8.exec(n))?parseInt(e[1],16)>>>0:(e=d.hex4.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=d.hsl.exec(n))?(255|l(b(e[1]),w(e[2]),w(e[3])))>>>0:(e=d.hsla.exec(n))?(l(b(e[1]),w(e[2]),w(e[3]))|k(e[4]))>>>0:null;return null===i?t:"rgba("+((4278190080&(i=i||0))>>>24)+", "+((16711680&i)>>>16)+", "+((65280&i)>>>8)+", "+(255&i)/255+")"}var C=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,T=/(#[\d\w]+|\w+\((?:\d+%?(?:,\s)*){3}(?:\d*\.?\d+)?\))/,F=new RegExp("("+Object.keys(E).join("|")+")","g");o=V,u={fn:function(t,n){return!!t.setNativeProps&&t.setNativeProps(n)},transform:function(t){return t}};var j={Text:i(n.Text),View:i(n.View),Image:i(n.Image)},O=function(){function t(){}var n=t.prototype;return n.start=function(t,n,e,i){},n.stop=function(){},n.__debouncedOnEnd=function(t){var n=this.__onEnd;this.__onEnd=null,n&&n(t)},t}(),S=function(i){function n(t,n){var e;return(e=i.call(this)||this)._parents=Array.isArray(t)?t:[t],e._interpolation=o.create(n),e}var t=n.prototype;return t.__getValue=function(){return this._interpolation.apply(this,this._parents.map(function(t){return t.__getValue()}))},t.__attach=function(){for(var t=0;t<this._parents.length;++t)this._parents[t]instanceof m&&this._parents[t].__addChild(this)},t.__detach=function(){for(var t=0;t<this._parents.length;++t)this._parents[t]instanceof m&&this._parents[t].__removeChild(this)},t.interpolate=function(t){return new n(this,t)},s(n,i),n}(e),R=0;var U=function(e){function t(t){var n;return(n=e.call(this)||this)._value=t,n._animation=null,n._animatedStyles=new Set,n._listeners={},n}var n=t.prototype;return n.__detach=function(){this.stopAnimation()},n.__getValue=function(){return this._value},n._update=function(){!function n(t,e){"function"==typeof t.update?e.add(t):t.__getChildren().forEach(function(t){return n(t,e)})}(this,this._animatedStyles)},n._flush=function(){0===this._animatedStyles.size&&this._update(),this._animatedStyles.forEach(function(t){return t.update()})},n._updateValue=function(t){for(var n in this._value=t,this._flush(),this._listeners)this._listeners[n]({value:this.__getValue()})},n.setValue=function(t){this._animation&&(this._animation.stop(),this._animation=null),this._animatedStyles.clear(),this._updateValue(t)},n.stopAnimation=function(t){this.stopTracking(),this._animation&&this._animation.stop(),this._animation=null,t&&t(this.__getValue())},n.interpolate=function(t){return new S(this,t)},n.animate=function(t,n){var e=this,i=this._animation;this._animation&&this._animation.stop(),this._animation=t,this._animatedStyles.clear(),t.start(this._value,function(t){return e._updateValue(t)},function(t){e._animation=null,n&&n(t)},i)},n.addListener=function(t){var n=String(R++);return this._listeners[n]=t,n},n.removeListener=function(t){delete this._listeners[t]},n.removeAllListeners=function(){this._listeners={}},n.stopTracking=function(){this._tracking&&this._tracking.__detach(),this._tracking=null},n.track=function(t){this.stopTracking(),this._tracking=t},s(t,e),t}(e),M=function(t,n){return null==t?n:t},q=function(a){function o(t){var y;(y=a.call(this)||this).onUpdate=function(){var t=y._lastPosition,n=y._lastVelocity,e=y._lastPosition,i=y._lastVelocity,r=Date.now();r>y._lastTime+64&&(r=y._lastTime+64);for(var o=Math.floor((r-y._lastTime)/1),a=0;a<o;++a){var s=.001,u=n,c=y._tension*(y._to-e)-y._friction*i,l=(e=t+u*s/2,i=n+c*s/2),f=y._tension*(y._to-e)-y._friction*i;e=t+l*s/2;var h=i=n+f*s/2,p=y._tension*(y._to-e)-y._friction*i;e=t+h*s/2;var d=i=n+p*s/2,_=y._tension*(y._to-e)-y._friction*i;e=t+h*s/2,i=n+p*s/2,t+=(u+2*(l+h)+d)/6*s,n+=(c+2*(f+p)+_)/6*s}if(y._lastTime=r,y._lastPosition=t,y._lastVelocity=n,y._onUpdate(t),y.__active){var m=!1;y._overshootClamping&&0!==y._tension&&(m=y._startPosition<y._to?t>y._to:t<y._to);var v=Math.abs(n)<=y._restSpeedThreshold,g=!0;if(0!==y._tension&&(g=Math.abs(y._to-t)<=y._restDisplacementThreshold),m||v&&g)return 0!==y._tension&&y._onUpdate(y._to),y.__debouncedOnEnd({finished:!0});y._animationFrame=requestAnimationFrame(y.onUpdate)}},y._overshootClamping=M(t.overshootClamping,!1),y._restDisplacementThreshold=M(t.restDisplacementThreshold,1e-4),y._restSpeedThreshold=M(t.restSpeedThreshold,1e-4),y._initialVelocity=t.velocity,y._lastVelocity=M(t.velocity,0),y._to=t.to;var n,e,i,r,o=(n=M(t.tension,40),e=M(t.friction,7),{tension:(r=n,3.62*(r-30)+194),friction:(i=e,3*(i-8)+25)});return y._tension=o.tension,y._friction=o.friction,y}var t=o.prototype;return t.start=function(t,n,e,i){if(this.__active=!0,this._startPosition=t,this._lastPosition=this._startPosition,this._onUpdate=n,this.__onEnd=e,this._lastTime=Date.now(),i instanceof o){var r=i.getInternalState();this._lastPosition=r.lastPosition,this._lastVelocity=r.lastVelocity,this._lastTime=r.lastTime}if("string"==typeof t)return this._onUpdate(t),this.__debouncedOnEnd({finished:!0});void 0!==this._initialVelocity&&null!==this._initialVelocity&&(this._lastVelocity=this._initialVelocity),this.onUpdate()},t.getInternalState=function(){return{lastPosition:this._lastPosition,lastVelocity:this._lastVelocity,lastTime:this._lastTime}},t.stop=function(){this.__active=!1,clearTimeout(this._timeout),cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})},s(o,a),o}(O),D=function(e){function t(t){var n;return(n=e.call(this)||this)._values=t.map(function(t){return new U(t)}),n}var n=t.prototype;return n.setValue=function(t){var e=this;t.forEach(function(t,n){return e._values[n].setValue(t)})},n.__getValue=function(){return this._values.map(function(t){return t.__getValue()})},n.stopAnimation=function(t){this._values.forEach(function(t){return t.stopAnimation()}),t&&t(this.__getValue())},n.__attach=function(){for(var t=0;t<this._values.length;++t)this._values[t]instanceof m&&this._values[t].__addChild(this)},n.__detach=function(){for(var t=0;t<this._values.length;++t)this._values[t]instanceof m&&this._values[t].__removeChild(this)},s(t,e),t}(e);function I(i,r,o){return void 0===o&&(o=q),t=i,e=I,a=o,p=(n=r).tension,d=n.friction,_=n.to,(t instanceof D?(s=t._values.map(function(t,n){return e(t,{tension:p,friction:d,to:_[n]},a)}),c=0,u={stopTogether:(l={},!1)},f=!(!1===u.stopTogether),h={start:function(i){if(c===s.length)return i&&i({finished:!0});s.forEach(function(t,n){var e=function(t){if(l[n]=!0,++c===s.length)return c=0,i&&i(t);!t.finished&&f&&h.stop()};t?t.start(e):e({finished:!0})})},stop:function(){s.forEach(function(t,n){!l[n]&&t.stop(),l[n]=!0})}}):null)||{start:function(t){var n=i,e=r;n.stopTracking(),r.to instanceof m?n.track(new v(n,r.to,o,e,t)):n.animate(new o(e),t)},stop:function(){i.stopAnimation()}};var t,n,e,a,s,u,c,l,f,h,p,d,_}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var N={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60}},L=function(t,n){return"function"==typeof t?t(n):t},$=function(t,n){var e,i=n[0],r=n[1];return x({},t,((e={})[i]=new U(r),e))},z=function(o){function t(){for(var t,n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t=n=o.call.apply(o,[this].concat(i))||this,n.state={props:void 0},n.animations={},n.callback=function(){n.props.onFrame&&n.props.onFrame(n.animatedProps.__getValue()),!n.props.native&&n.forceUpdate()},t||W(n)}var n=t.prototype;return n.componentWillUnmount=function(){this.stop()},n.componentWillMount=function(){this.updatePropsAsync(this.props)},n.componentWillReceiveProps=function(t){this.updatePropsAsync(t)},n.updatePropsAsync=function(t){t.inject&&(this.inject=t.inject(this,t),this.inject)||this.updateProps(t)},n.updateProps=function(t,n,m){var v=this;if(void 0===n&&(n=!1),void 0===m&&(m=!1),!this.destroyed||!t.destroyed){this.destroyed=t.destroyed;var g=t.impl,y=t.from,e=t.to,b=t.config,k=t.attach,w=t.immediate,A=t.hold,V=t.reset,P=(t.onFrame,t.onRest),i=(t.inject,t.native,Object.entries(x({},y,e)));this.interpolators={},this.animations=i.reduce(function(t,n,e){var i,r=n[0],o=n[1],a=!1===V&&v.animations[r]||(v.animations[r]={}),s="number"==typeof o,u="string"==typeof o&&!/\d/.test(o)&&!E[o],c=!s&&!u&&Array.isArray(o),l=void 0!==y[r]?y[r]:o,f=l instanceof U,h=s||c?o:1;if(k){var p=k(v),d=p&&p.animations[r];d&&(h=d.animation)}if(f)a.animation=a.interpolation=l;else if(s||u)a.animation=a.interpolation=a.animation||new U(l);else if(c)a.animation=a.interpolation=a.animation||new D(l);else{var _=a.interpolation&&a.interpolation._interpolation(a.animation._value);a.animation=new U(0),a.interpolation=a.animation.interpolate({range:[0,1],output:[void 0!==_?_:l,o]})}return L(w,r)&&a.animation.setValue(h),a.stopped=!1,a.onFinish=function(t){if(v.animations[r].stopped=!0,v.getAnimations().every(function(t){return t.stopped})){var n=x({},v.props.from,v.props.to);if(P&&P(n),t&&"function"==typeof t&&t(n),m){var e=v.convertValues(v.props);v.inject=v.renderChildren(v.props,e),v.forceUpdate()}}},a.start=function(n){if(L(A,r))return a.onFinish(n);I(a.animation,x({to:h},L(b,r)),g).start(function(t){return t.finished&&a.onFinish(n)})},a.stop=function(){a.stopped=!0,a.animation.stopAnimation()},v.interpolators[r]=a.interpolation,x({},t,((i={})[r]=a,i))},{});var r=this.animatedProps;this.animatedProps=new a(this.interpolators,this.callback),r&&r.__detach(),this.updateToken=!0,n&&this.forceUpdate()}},n.start=function(){var n,t=this,e=function(){return t.getAnimations().forEach(function(t){return t.start(n)})},i=new Promise(function(t){return n=t});return this.props.delay?(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e()},this.props.delay)):(e(),i)},n.stop=function(){this.getAnimations().forEach(function(t){return t.stop()})},n.flush=function(){this.getAnimations().forEach(function(t){var n=t.interpolation;return n._update&&n._update()})},n.getAnimations=function(){var n=this;return Object.keys(this.animations).map(function(t){return n.animations[t]})},n.getValues=function(){return this.animatedProps?this.animatedProps.__getValue():{}},n.getAnimatedValues=function(){return this.props.native?this.interpolators:this.getValues()},n.convertValues=function(t){var n=t.from,e=t.to,i=t.native,r=(t.children,t.render,this.getForwardProps(t)),o=Object.entries(x({},n,e));return i?o.reduce($,r):x({},n,e,r)},n.getForwardProps=function(t){void 0===t&&(t=this.props);var n=t;n.to,n.from,n.config,n.native,n.onRest,n.onFrame,n.children,n.render,n.reset,n.immediate,n.impl,n.inject,n.hold;return y(n,["to","from","config","native","onRest","onFrame","children","render","reset","immediate","impl","inject","hold"])},n.componentDidUpdate=function(){this.updateToken&&(this.updateToken=!1,this.start())},n.componentDidMount=function(){this.start()},n.renderChildren=function(t,n){return t.render?t.render(x({},n,{children:t.children})):t.children(n)},n.render=function(){if(this.inject){var t=this.inject;return this.inject=void 0,t}var n=this.props,e=(n.children,n.render,this.getAnimatedValues());return e&&Object.keys(e).length?this.renderChildren(this.props,x({},e,this.getForwardProps())):null},s(t,o),t}(g.PureComponent);z.defaultProps={from:{},to:{},config:N.default,native:!1,immediate:!1,hold:!1,reset:!1,impl:q,inject:void 0};var K=function(){return null},B=function(t,n){return void 0===t&&(t={}),"function"==typeof t?t(n):t},G=function(t){var n=t.keys,e=t.children,i=t.render,r=t.items,o=y(t,["keys","children","render","items"]);return e=i||e||K,n="function"==typeof n?r.map(n):n,Array.isArray(e)||(e=[e],n=n?[n]:e),x({keys:n,children:e,items:r},o)},H=function(o){function t(){for(var t,n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t=n=o.call.apply(o,[this].concat(i))||this,n.springs=[],n.state={transitions:[]},t||W(n)}var n=t.prototype;return n.componentDidMount=function(){this.componentWillReceiveProps(this.props)},n.componentWillReceiveProps=function(t){var a=this,e=this.state.transitions,n=G(t),s=n.keys,u=n.children,c=n.items,l=n.from,f=n.enter,h=n.leave,p=n.update,i=G(this.props),d=i.keys,_=(i.children,i.items),r=e.map(function(t){return t.key}),o=new Set(s),m=new Set(r),v=s.filter(function(t){return!m.has(t)}),g=r.filter(function(t){return!o.has(t)}),y=s.filter(function(t){return m.has(t)});v.forEach(function(t){var n=s.indexOf(t);e=e.slice(0,n).concat([t],e.slice(n))}),e=e.map(function(n){var t="object"==typeof n,e=t?n.key:n,i=s.indexOf(e),r=c?c[i]:e;if(t){if(g.find(function(t){return t===e})){if(n.key=n.key+"_",!n.destroyed){var o=_?_[d.indexOf(e)]:e;n.to=B(h,o),n.destroyed=!0}n.from=a.springs[e].getValues(),n.onRest=function(){return a.setState(function(t){return{transitions:t.transitions.filter(function(t){return t!==n})}})}}else n.children=u[i]||n.children,p&&-1!==y.indexOf(n.key)&&(n.to=B(p,r)||n.to);return n}return{children:u[i],key:e,item:r,to:B(f,r),from:B(l,r)}});var b=s.map(function(n){return e.find(function(t){return t.key===n})});e.forEach(function(t,n){t.destroyed&&(b=b.slice(0,n).concat([t],b.slice(n)))}),this.setState({transitions:b})},n.getValues=function(){},n.render=function(){var a=this,t=this.props,s=t.render,n=(t.from,t.enter,t.leave,t.native),e=void 0!==n&&n,i=t.config,r=void 0===i?N.default:i,u=(t.keys,t.items,t.onFrame),c=t.onRest,l=x({native:e,config:r},y(t,["render","from","enter","leave","native","config","keys","items","onFrame","onRest"]));return this.state.transitions.map(function(t,n){var e=t.key,i=t.item,r=t.children,o=y(t,["key","item","children"]);return g.createElement(z,x({ref:function(t){return t?a.springs[e]=t:delete a.springs[e]},key:e,onRest:c&&function(t){return c(i,t)},onFrame:u&&function(t){return u(i,t)}},o,l,{render:s&&r,children:s?a.props.children:r}))})},s(t,o),t}(g.PureComponent),J=function(t){function n(){return t.apply(this,arguments)||this}var e=n.prototype;return e.getValues=function(){return this.instance&&this.instance.getValues()},e.componentDidMount=function(){this.instance&&this.instance.flush()},e.componentDidUpdate=function(){this.instance&&this.instance.flush()},e.render=function(){var e=this,t=this.props,r=t.children,o=t.render,n=t.from,i=void 0===n?{}:n,a=t.to,s=void 0===a?{}:a,u=t.native,c=void 0!==u&&u,l=t.config,f=void 0===l?N.default:l,h=t.keys,p=t.delay,d=t.onRest,_=y(t,["children","render","from","to","native","config","keys","delay","onRest"]),m=new Set,v=x({},_,{native:c,from:i,config:f,to:s});return(o||r).map(function(t,i){var n=0===i&&p;return g.createElement(z,x({ref:function(t){return 0===i&&(e.instance=t)},onRest:0===i?d:null,key:h[i]},v,{delay:n,attach:function(t){return n=i,e=t,m.add(e),0===n?void 0:Array.from(m)[n-1];var n,e},render:o&&t,children:o?r:t}))})},s(n,t),n}(g.PureComponent),Q=function(o){function t(){for(var t,r,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return t=r=o.call.apply(o,[this].concat(e))||this,r.guid=0,r.state={primitive:void 0,props:{},oldProps:{},resolve:function(){return null}},r.next=function(e,i){return new Promise(function(n){r.setState(function(t){return{primitive:e,props:i,oldProps:x({},r.state.props),resolve:n}})})},t||W(r)}var n=t.prototype;return n.componentDidMount=function(){this.props.script&&this.props.script(this.next),this.UNSAFE_componentWillReceiveProps(this.props)},n.UNSAFE_componentWillReceiveProps=function(t){var n=this,e=t.states,i=t.state,r=t.primitive,o=++this.guid;if(e&&i&&r){var a=e[i];if(Array.isArray(a)){var s=Promise.resolve(),u=function(){if(l){if(f>=c.length)return"break";h=c[f++]}else{if((f=c.next()).done)return"break";h=f.value}var t=h;s=s.then(function(){return o===n.guid&&n.next(r,t)})},c=a,l=Array.isArray(c),f=0;for(c=l?c:c[Symbol.iterator]();;){var h;if("break"===u())break}}else"function"==typeof a?a(function(t){return o===n.guid&&n.next(r,t)}):this.next(r,e[i])}},n.render=function(){var n=this,t=this.state,e=t.primitive,i=t.props,r=t.oldProps,o=t.resolve,a=this.props,s=(a.script,a.from),u=y(a,["script","from"]);if(e){var c=this.instance&&this.instance.getValues(),l="function"==typeof i.from?i.from:x({},r.from,c,i.from);return g.createElement(e,x({ref:function(t){return n.instance=t}},u,i,{from:x({},l,s),onRest:o}))}return null},s(t,o),t}(g.Component);Q.Spring=function(t){return X(z,t)},Q.Trail=function(t){return X(J,t)},Q.Transition=function(t){return X(H,t)};var X=function(n,e){return function(t){return g.createElement(Q,x({primitive:n,states:e},t))}};t.Spring=z,t.Keyframes=Q,t.Transition=H,t.Trail=J,t.Animation=O,t.SpringAnimation=q,t.AnimatedValue=U,t.config=N,t.animated=j,t.controller=I,t.interpolate=function(t,n){return new S(t,n)},t.createAnimatedComponent=i,Object.defineProperty(t,"__esModule",{value:!0})});
